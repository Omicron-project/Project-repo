<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recipe Emissions Calculator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f8f9fa;
            padding: 40px;
        }
        .container {
            max-width: 800px;
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
        }
        .servings-container {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }
        .servings-container input {
            width: 50px; 
            text-align: center;
        }
        .ingredient-row {
            align-items: center;
        }
        .ingredient-search {
            flex: 2; 
        }
        .ingredient-amount {
            width: 180px;
        }
        .unit-select {
            width: 80px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="text-center">Recipe Emissions Calculator</h1>
        <p class="text-center">Enter the number of servings and add ingredients by typing in the search box. Suggestions will appear based on the available ingredients. Enter the amount and select the unit (grams or deciliters). You can add up to 15 ingredients. When ready, press "Calculate Emissions" to see the CO₂ emissions per serving.</p>
        
        <form id="emissionForm">
            <div class="servings-container">
                <label for="servings">Number of servings:</label>
                <input type="number" id="servings" class="form-control" value="0" min="1">
            </div>
            
            <div id="ingredient-list">
                <div class="ingredient-row d-flex mb-2">
                    <input type="text" class="form-control ingredient-search me-2" placeholder="Search for ingredient">
                    <input type="number" class="form-control ingredient-amount me-2" placeholder="Amount">
                    <select class="form-select unit-select me-2">
                        <option value="gr">gr</option>
                        <option value="dl">dl</option>
                    </select>
                    <button type="button" class="btn btn-danger delete-ingredient">X</button>
                </div>
            </div>
            <button type="button" id="addIngredient" class="btn btn-secondary">+ Add More</button>
            <button type="submit" class="btn btn-dark w-100 mt-3">Calculate Emissions</button>
        </form>
        
        <div id="result" class="mt-3 text-center"></div>
    </div>

    <script>
        $(document).ready(function () {
            let maxIngredients = 15;
            let count = 1;
            
            // Adds a new ingredient row when the + button is clicked
            $('#addIngredient').click(function () {
                if (count < maxIngredients) {
                    let newRow = `<div class="ingredient-row d-flex mb-2">
                        <input type="text" class="form-control ingredient-search me-2" placeholder="Search for ingredient">
                        <input type="number" class="form-control ingredient-amount me-2" placeholder="Amount">
                        <select class="form-select unit-select me-2">
                            <option value="gr">gr</option>
                            <option value="dl">dl</option>
                        </select>
                        <button type="button" class="btn btn-danger delete-ingredient">X</button>
                    </div>`;
                    $('#ingredient-list').append(newRow);
                    count++;
                }
            });
            
            // Deletes an ingredient row when the X button is clicked
            $(document).on('click', '.delete-ingredient', function () {
                $(this).closest('.ingredient-row').remove();
                count--;
            });
            
            // Displays result text when the form is submitted
            $('#emissionForm').submit(function (e) {
                e.preventDefault();
                $('#result').html(`<h3>Result:</h3><p>CO₂ emissions per serving is X.</p>`);
            });
        });
    </script>
</body>
</html>
